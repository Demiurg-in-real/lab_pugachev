я не знаю как и почему, но "оптимизированный" и сокращённый код "хз_как..." работает, но он работает. Теретически он должен работать и работает, но нз почему вылазит ошибка сегментирования (хотя знаю - слишком большо "и", просто вылазит за пределы файла, да?)
Второй код, помеченный как основной - работает без сучка без задоринки и не ругается ошибкой сегментирования (почему???)